<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Calculadora de Reajuste - Ferramentas</title>
  <link rel="stylesheet" href="../../assets/styles.css" />
</head>

<body>
  <header class="nav">
    <div class="navInner">
      <div class="brand">
        <span>Shopping Center</span>
        <span class="badge">Ferramentas</span>
      </div>
      <nav class="menu">
        <a href="../../" id="nav-home">Home</a>
        <a href="../../dicas/" id="nav-dicas">Dicas</a>
        <a href="../" class="active" id="nav-ferramentas">Ferramentas</a>
        <a href="../../planilhas/" id="nav-planilhas">Planilhas</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <div class="calcGrid">

      <!-- ESQUERDA -->
      <section class="panel">
        <div class="head">
          <div>
            <h1 class="title">Calculadora de Reajuste de Aluguel</h1>
            <p class="sub">
              Você informa <b>aluguel</b>, <b>data de início</b>, <b>índice</b> e <b>periodicidade</b>.
              Para <b>anual</b>, o sistema traz os reajustes <b>ano a ano</b> (quando houver dados).
            </p>
          </div>
          <div class="badge">Brasil · índices oficiais</div>
        </div>

        <div class="body">
          <div class="formGrid">
            <div>
              <label for="rent">Valor do aluguel (R$)</label>
              <div class="field">
                <input id="rent" type="text" inputmode="numeric" placeholder="Ex.: 10000 ou 10.000,00" autocomplete="off" />
              </div>
              <div class="hint">Digite <b>10000</b> e ao sair do campo vira <b>R$ 10.000,00</b>.</div>
            </div>

            <div>
              <label for="idx">Índice</label>
              <div class="field">
                <select id="idx">
                  <option value="189">IGP-M (FGV) — SGS 189</option>
                  <option value="190">IGP-DI (FGV) — SGS 190</option>
                  <option value="433">IPCA (IBGE) — SGS 433</option>
                  <option value="193">IPC-FIPE — SGS 193</option>
                </select>
              </div>
              <div class="hint">Índices oficiais via SGS/BCB.</div>
            </div>

            <div>
              <label for="start">Data de início do contrato</label>
              <div class="field">
                <input id="start" type="text" inputmode="numeric" placeholder="dd/mm/aaaa" autocomplete="off" maxlength="10" />
              </div>
              <div class="hint">Máscara: <b>dd/mm/aaaa</b>. O cálculo considera o mês/ano.</div>
            </div>

            <div>
              <label for="freq">Periodicidade do reajuste</label>
              <div class="field">
                <select id="freq">
                  <option value="monthly">Mensal</option>
                  <option value="annual" selected>Anual (ano a ano)</option>
                </select>
              </div>
              <div class="hint">Anual: mostra cada aniversário até hoje (e sinaliza quando for futuro).</div>
            </div>
          </div>

          <div class="row">
            <label class="check" for="lock">
              <input id="lock" type="checkbox" />
              Travar deflação (não reduzir)
            </label>

            <button id="btn" class="btn">Calcular</button>
          </div>

          <div id="status" class="status">Preencha os campos e clique em <b>Calcular</b>.</div>

          <details style="margin-top:12px;">
            <summary>Diagnóstico (URL consultada e período)</summary>
            <pre id="diag">—</pre>
          </details>

          <a class="backlink" href="../">← Voltar para Ferramentas</a>
        </div>
      </section>

      <!-- DIREITA -->
      <aside class="panel">
        <div class="head" style="padding-bottom:12px;">
          <div>
            <h2 class="title" style="font-size:20px;margin:0;">Resultado</h2>
            <p class="sub" style="margin-top:6px;font-size:13px;">Último reajuste calculado + visão ano a ano (anual).</p>
          </div>
        </div>

        <!-- KPIs compactos em 2x2 -->
        <div class="kpiGrid">
          <div class="kpi">
            <p class="k">Reajuste (referência)</p>
            <p class="v" id="outRef">—</p>
          </div>
          <div class="kpi">
            <p class="k">Variação no período</p>
            <p class="v" id="outVar">—</p>
          </div>
          <div class="kpi">
            <p class="k">Fator aplicado</p>
            <p class="v" id="outFactor">—</p>
          </div>
          <div class="kpi">
            <p class="k">Novo aluguel</p>
            <p class="v" id="outRent">—</p>
          </div>
        </div>

        <div class="section">
          <div class="yyWrap">
            <p class="yyTitle">Reajustes ano a ano (anual)</p>
            <p class="yyDesc">
              Se o reajuste for futuro e não houver índice publicado, aparece como <b>Sem dados</b>.
            </p>

            <div class="yyTable" id="yyBody"></div>
          </div>

          <details>
            <summary>Ver meses e variações utilizadas (último cálculo)</summary>
            <pre id="outList">—</pre>
          </details>

          <div class="hint">Fonte: API SGS/BCB (via API do site).</div>
        </div>
      </aside>

    </div>
  </main>

  <script src="../../assets/reajuste.js"></script>
</body>
</html>
